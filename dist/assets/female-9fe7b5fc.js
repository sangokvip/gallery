import{c as Me,r as d,t as W,j as e,T as Be,B as a,A as Pe,C as se,a as Ae,d as X,b as r,e as c,f as ne,I as re,g as Fe,D as _e,L as Le,h as I,i as N,k as E,P as j,S as ae,l as z,m as M,n as B,o as P,p as He,q as Ue,s as Ge,R as Qe}from"./v4-74551561.js";import{g as A,a as O,d as K,C as F,b as oe,c as Ye,e as qe,f as Xe,G as h,R as Ke,P as Ve,h as Je,i as Ze,j as et,F as tt,r as st,k as nt,l as rt,s as at}from"./databaseDiagnostic-80cc373d.js";import{d as ie,a as le,b as ot,M as _}from"./Message-321b40ed.js";import{d as ce}from"./Male-954eee75.js";/* empty css              */const L=["SSS","SS","S","Q","N","W"],v={"ðŸ‘‘ æ€§å¥´":["ðŸ”ž å¼ºå¥¸","ðŸ‘¥ è½®å¥¸","ðŸ’‹ å£çˆ†","ðŸ’¦ é¢œå°„","ðŸ’‰ å†…å°„","ðŸ‘ è‚›äº¤","ðŸ”§ å™¨å…·æŠ˜ç£¨","âš¡ï¸ å¼ºåˆ¶é«˜æ½®","ðŸ’§ æ½®å¹å¤±ç¦","ðŸŽ­ è‡ªæ…°å±•ç¤º","ðŸš« ç¦æ­¢é«˜æ½®","ðŸ”„ æ‰©å¼ é˜´é“","â­•ï¸ æ‰©å¼ è‚›é—¨","ðŸ”„ åŒé˜³å…·æ’å…¥","âž• å¤šé˜³å…·æ’å…¥","âœŒï¸ åŒæ’"],"ðŸ• çŠ¬å¥´":["ðŸ”’ å›šç¬¼å…³æŠ¼","â›“ï¸ é¡¹åœˆé•£é“","ðŸ½ï¸ å–‚é£Ÿ","ðŸ¾ çˆ¬è¡Œ","ðŸ‘£ èˆ”è¶³","ðŸ‘  è¸©è¸","ðŸŽ  éª‘ä¹˜"],"ðŸŽŽ çŽ©å¶å¥´":["ðŸŽ­ è§’è‰²æ‰®æ¼”","ðŸ‘” åˆ¶æœè¯±æƒ‘","ðŸŽ­ äººå¶è£…æ‰®","ðŸ’ ä¹³çŽ¯","ðŸ’Ž é˜´çŽ¯","ðŸ’« è„çŽ¯","âœ‚ï¸ å‰ƒæ¯›","ðŸ” å†…çª¥é•œç ”ç©¶","ðŸ”§ æ€§å·¥å…·ç ”ç©¶","ðŸŽ¨ ä½œä¸ºè‰ºæœ¯å“","ðŸª‘ ä½œä¸ºå®¶å…·","ðŸš¬ ä½œä¸ºçƒŸç°ç¼¸","ðŸ‘— ä½œä¸ºå¥³ä»†","ðŸ¤ é™åˆ¶è¯´è¯å†…å®¹"],"ðŸŒ² é‡Žå¥´":["ðŸŒ³ é‡Žå¤–æš´éœ²","â›“ï¸ é‡Žå¤–å¥´å½¹","ðŸƒâ€â™€ï¸ é‡Žå¤–æµæ”¾","ðŸŒ¿ é‡Žå¤–çŽ©å¼„","ðŸ¢ å…¬å…±åœºåˆæš´éœ²","ðŸ›ï¸ å…¬å…±åœºåˆçŽ©å¼„","ðŸŽ—ï¸ å…¬å¼€åœºåˆæ†ç»‘ï¼ˆè¡£æœå†…ï¼‰","ðŸ“± å…¬å¼€åœºåˆå™¨å…·ï¼ˆè¡£æœå†…ï¼‰","ðŸ‘€ éœ²é˜´ï¼ˆåƒæœ‹å‹ï¼‰","ðŸ‘¥ éœ²é˜´ï¼ˆå‘ç”Ÿäººï¼‰","ðŸ” è´žæ“å¸¦","ðŸ“¿ å…¬å¼€åœºåˆé¡¹åœˆ"],"ðŸ¾ å…½å¥´":["ðŸ• å…½äº¤","ðŸº ç¾¤å…½è½®äº¤","ðŸŽ äººå…½åŒäº¤","ðŸ¦ å…½è™","ðŸœ æ˜†è™«çˆ¬èº«"],"âš”ï¸ åˆ‘å¥´":["ðŸ‘‹ è€³å…‰","ðŸ¤ å£å¡ž","ðŸ’‡â€â™€ï¸ æ‰¯å¤´å‘","ðŸ‘¢ çš®å¸¦","ðŸŽ¯ éž­å­","ðŸŽ‹ è—¤æ¡","ðŸªµ æœ¨æ¿","ðŸ æ£æ£’","ðŸ–Œï¸ æ¯›åˆ·","âš¡ï¸ è™é˜´","ðŸ”— ç´§ç¼š","â›“ï¸ åŠç¼š","ðŸ”’ æ‹˜æŸ","ðŸ“Ž ä¹³å¤¹","âš¡ï¸ ç”µå‡»","ðŸ•¯ï¸ æ»´èœ¡","ðŸ“ é’ˆåˆº","ðŸ’‰ ç©¿å­”","ðŸ”¥ çƒ™å°","ðŸŽ¨ åˆºé’","âœ‚ï¸ åˆ‡å‰²","ðŸ”¥ ç«åˆ‘","ðŸ’§ æ°´åˆ‘","ðŸ˜®â€ðŸ’¨ çª’æ¯","ðŸ‘Š ä½“ç½š","ðŸ§Š å†°å—"],"ðŸš½ åŽ•å¥´":["ðŸ‘… èˆ”ç²¾","ðŸ¥› åžç²¾","ðŸ’§ å”¾æ¶²","ðŸ’¦ å–å°¿","ðŸš¿ å°¿æµ´","ðŸ‘„ èˆ”é˜´","ðŸ’¦ æ”¾å°¿","ðŸš° çŒè‚ ","ðŸ‘… èˆ”è‚›","ðŸ’© æŽ’ä¾¿","ðŸ› ç²ªæµ´","ðŸ½ï¸ åƒç²ª","ðŸ¤§ åƒç—°","ðŸ©¸ åƒç»è¡€"],"ðŸ’­ å¿ƒå¥´":["ðŸ—£ï¸ è¨€è¯­ä¾®è¾±","ðŸ˜ˆ äººæ ¼ä¾®è¾±","ðŸ§  æ€ç»´æŽ§åˆ¶","ðŸŒ ç½‘ç»œæŽ§åˆ¶","ðŸ“¢ è¯­è¨€ç®¡æ•™"],"âœ¨ å…¶ä»–":["ðŸ‘¥ å¤šå¥´è°ƒæ•™","ðŸ‘‘ å¤šä¸»è°ƒæ•™","ðŸŒ ç½‘ç»œå…¬è°ƒ","ðŸª¶ ç˜™ç—’","ðŸ“… é•¿æœŸåœˆå…»","â±ï¸ çŸ­æœŸåœˆå…»","ðŸ˜´ å‰¥å¤ºç¡çœ ","ðŸŒ€ å‚¬çœ ","ðŸ‘­ åŒæ€§æ€§çˆ±"]},it=Me({palette:{primary:{main:"#6200ea",light:"#9d46ff",dark:"#0a00b6"},secondary:{main:"#ff4081",light:"#ff79b0",dark:"#c60055"},background:{default:"#f8f9fa",paper:"#ffffff"},text:{primary:"#2c3e50",secondary:"#546e7a"}},typography:{h3:{fontWeight:700,marginBottom:"2rem",letterSpacing:"-0.5px",color:"#1a237e"},subtitle1:{color:"text.secondary",marginBottom:"2.5rem",fontSize:"1.1rem"},h5:{fontWeight:600,marginBottom:"1.5rem",color:"#303f9f"}},components:{MuiPaper:{styleOverrides:{root:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"12px","&:hover":{boxShadow:"0 12px 24px rgba(0,0,0,0.1)",transform:"translateY(-4px)"}}}},MuiSelect:{styleOverrides:{root:{backgroundColor:"#fff",borderRadius:"8px","&:hover":{backgroundColor:"#f5f5f5"}}}},MuiButton:{styleOverrides:{root:{borderRadius:"8px",textTransform:"none",fontWeight:600,padding:"8px 24px",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 12px rgba(0,0,0,0.1)"}}}}}});function lt(){const[f,S]=d.useState({}),[de,H]=d.useState(!1),[xe,i]=d.useState(!1),[pe,l]=d.useState(""),[he,k]=d.useState(!1),[me,ue]=d.useState(""),[fe,T]=d.useState(!1),[ge,D]=d.useState(!1),[V,be]=d.useState(A()),[$,je]=d.useState([]),[g,u]=d.useState(!1);d.useState(!0);const[ye,U]=d.useState(!1),[ve,G]=d.useState(!1),[m,J]=d.useState(null),[ke,Se]=d.useState(!1),C=d.useRef(null);d.useEffect(()=>{Ce(),Q()},[]),d.useEffect(()=>{const t=Object.keys(f).length>0;U(t)},[f]);const Ce=async()=>{try{const t=O(),s=await W.getLatestTestRecord(t,"female");s&&s.ratings&&(S(s.ratings),l("å·²åŠ è½½æ‚¨çš„æœ€æ–°æµ‹è¯•è®°å½•"),i(!0))}catch(t){console.error("åŠ è½½æœ€æ–°æµ‹è¯•è®°å½•å¤±è´¥:",t)}},Q=async()=>{try{u(!0);const t=O(),s=await W.getUserTestRecords(t);je(s.filter(n=>n.test_type==="female"))}catch(t){console.error("åŠ è½½æµ‹è¯•è®°å½•å¤±è´¥:",t),l("åŠ è½½åŽ†å²è®°å½•å¤±è´¥"),i(!0)}finally{u(!1)}},we=async()=>{try{u(!0);const t=O(),s=A(),n={radarData:ee(),groupedRatings:te(),totalItems:Object.keys(f).length,completedItems:Object.values(f).filter(o=>o!=="").length};await W.saveTestRecord({userId:t,nickname:s,testType:"female",ratings:f,reportData:n}),U(!1),l("æµ‹è¯•è®°å½•ä¿å­˜æˆåŠŸï¼"),i(!0),await Q()}catch(t){console.error("ä¿å­˜æµ‹è¯•è®°å½•å¤±è´¥:",t),t.message.includes("Could not find")||t.message.includes("column")||t.message.includes("table")?l('æ•°æ®åº“é…ç½®æœ‰é—®é¢˜ï¼Œè¯·ç‚¹å‡»"æ•°æ®åº“è¯Šæ–­"æ£€æŸ¥'):l("ä¿å­˜å¤±è´¥: "+t.message),i(!0)}finally{u(!1)}},Z=async()=>{try{u(!0),G(!0);const t=await st();J(t)}catch(t){console.error("è¯Šæ–­å¤±è´¥:",t),l("è¯Šæ–­å¤±è´¥: "+t.message),i(!0)}finally{u(!1)}},Re=()=>{Se(!0),l("æ•°æ®åº“è¯Šæ–­åŠŸèƒ½å·²æ¿€æ´»ï¼"),i(!0)},De=(t,s,n)=>{S(o=>({...o,[`${t}-${s}`]:n}))},x=(t,s)=>f[`${t}-${s}`]||"",b=t=>{switch(t){case"SSS":return"#FF1493";case"SS":return"#FF69B4";case"S":return"#87CEEB";case"Q":return"#FFD700";case"N":return"#FF4500";case"W":return"#808080";default:return"#CCCCCC"}},ee=()=>Object.entries(v).map(([t])=>{const s=v[t],o=s.map(p=>{switch(x(t,p)){case"SSS":return 6;case"SS":return 5;case"S":return 4;case"Q":return 3;case"N":return 2;case"W":return 1;default:return 0}}).reduce((p,w)=>p+w,0)/s.length;return{category:t,value:o,fullMark:6}}),We=async()=>{if(C.current)try{const t=document.createElement("div");t.style.position="absolute",t.style.left="-9999px",t.style.width="1200px",t.style.backgroundColor="#ffffff",t.style.padding="40px",document.body.appendChild(t);const s=C.current.cloneNode(!0);t.appendChild(s);const n=document.createElement("style");n.textContent=`
          .MuiGrid-container {
            display: grid !important;
            grid-template-columns: repeat(3, 1fr) !important;
            gap: 16px !important;
            width: 100% !important;
          }
          .MuiGrid-item {
            width: 100% !important;
            max-width: 100% !important;
            flex: none !important;
            padding: 0 !important;
          }
          .MuiPaper-root {
            height: 100% !important;
          }
          .MuiTypography-root {
            font-size: 16px !important;
          }
          .MuiTypography-h4 {
            font-size: 32px !important;
            margin-bottom: 32px !important;
          }
          .MuiTypography-h5 {
            font-size: 24px !important;
            margin-bottom: 16px !important;
          }
          .recharts-wrapper {
            width: 600px !important;
            height: 400px !important;
            margin: 0 auto 32px !important;
          }
        `,t.appendChild(n),await new Promise(y=>setTimeout(y,500));const o=await nt(t,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:1200,height:t.offsetHeight,onclone:y=>{y.querySelectorAll(".recharts-wrapper").forEach(ze=>{ze.style.margin="0 auto"})}});document.body.removeChild(t);const p=await new Promise(y=>o.toBlob(y,"image/png",1));if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))try{if(navigator.share&&navigator.canShare){const q={files:[new File([p],"Mè‡ªè¯„æŠ¥å‘Š.png",{type:"image/png"})]};if(navigator.canShare(q)){await navigator.share(q),l("å›¾ç‰‡å·²å‡†å¤‡å¥½åˆ†äº«ï¼"),i(!0);return}}}catch(y){console.error("åˆ†äº«å¤±è´¥:",y)}const R=URL.createObjectURL(p),Y=document.createElement("a");Y.href=R,Y.download="Mè‡ªè¯„æŠ¥å‘Š.png",Y.click(),URL.revokeObjectURL(R),l("æŠ¥å‘Šå·²ä¿å­˜ä¸ºé«˜æ¸…å›¾ç‰‡ï¼"),i(!0)}catch(t){console.error("å¯¼å‡ºå›¾ç‰‡é”™è¯¯:",t),l("å¯¼å‡ºå›¾ç‰‡å¤±è´¥ï¼Œè¯·é‡è¯•"),i(!0)}},Ie=async()=>{if(C.current)try{const t=C.current,s={margin:1,filename:"å¥³Mè‡ªè¯„æŠ¥å‘Š.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};await rt().set(s).from(t).save(),l("æŠ¥å‘Šå·²æˆåŠŸä¿å­˜ä¸ºPDFï¼"),i(!0)}catch{l("å¯¼å‡ºPDFå¤±è´¥ï¼Œè¯·é‡è¯•"),i(!0)}},Ne=(t,s)=>{const n=v[t],o={...f};n.forEach(p=>{o[`${t}-${p}`]=s}),S(o),l(`å·²å°†${t}ç±»åˆ«ä¸‹æ‰€æœ‰é€‰é¡¹è®¾ç½®ä¸º${s}`),i(!0)},te=()=>{const t={};Object.entries(v).forEach(([o,p])=>{p.forEach(w=>{const R=x(o,w);t[R]||(t[R]=[]),t[R].push({category:o,item:w})})});const s={};return["SSS","SS","S","Q","W","N"].forEach(o=>{t[o]&&t[o].length>0&&(s[o]=t[o])}),s},Ee=async t=>{try{u(!0);const s=await W.getTestRecordDetails(t);s&&s.ratings&&(S(s.ratings),T(!1),l("æµ‹è¯•è®°å½•åŠ è½½æˆåŠŸ"),i(!0))}catch(s){console.error("åŠ è½½æµ‹è¯•è®°å½•å¤±è´¥:",s),l("åŠ è½½è®°å½•å¤±è´¥: "+s.message),i(!0)}finally{u(!1)}},Oe=async t=>{try{u(!0);const s=O();await W.deleteTestRecord(t,s),l("è®°å½•åˆ é™¤æˆåŠŸ"),i(!0),await Q()}catch(s){console.error("åˆ é™¤æµ‹è¯•è®°å½•å¤±è´¥:",s),l("åˆ é™¤å¤±è´¥: "+s.message),i(!0)}finally{u(!1)}},Te=()=>{const t=at(V);l("æ˜µç§°æ›´æ–°æˆåŠŸ: "+t),i(!0),D(!1)},$e=()=>{S({}),U(!1),l("å½“å‰æµ‹è¯•å·²æ¸…ç©º"),i(!0)};return e.jsx(Be,{theme:it,children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(Pe,{position:"sticky",sx:{background:"transparent",backgroundColor:"#fff0f5",border:"4px solid #ff69b4",borderBottom:"4px solid #ff69b4",boxShadow:"4px 4px 0 rgba(255, 105, 180, 0.5)",borderRadius:"0",marginBottom:"1rem"},className:"pixel-theme-pink",children:e.jsx(se,{maxWidth:"lg",children:e.jsxs(Ae,{sx:{justifyContent:"space-between",alignItems:"center",padding:{xs:"8px 16px",md:"8px 24px"},minHeight:{xs:"56px",md:"64px"}},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,flex:"1 1 auto",justifyContent:"flex-start",height:"100%"},children:[e.jsx(X,{sx:{display:"flex",color:"#1E3D59"}}),e.jsx(r,{variant:"h5",sx:{fontWeight:"bold",color:"#1E3D59",display:"flex",alignItems:"center",margin:0,padding:0,lineHeight:1,height:"100%"},className:"pixel-title-pink",children:"M-Profile Lab"})]}),e.jsxs(a,{sx:{display:{xs:"none",md:"flex"},gap:2,flex:"1 1 auto",justifyContent:"flex-end"},children:[e.jsx(c,{color:"inherit",startIcon:e.jsx(ne,{}),href:"/index.html",className:"pixel-button-pink",sx:{color:"#1E3D59"},children:"é¦–é¡µ"}),e.jsx(c,{color:"inherit",startIcon:e.jsx(X,{}),href:"/s.html",className:"pixel-button-pink",sx:{color:"#1E3D59"},children:"Sç‰ˆ"}),e.jsx(c,{color:"inherit",startIcon:e.jsx(ce,{}),href:"/male.html",className:"pixel-button-pink",sx:{color:"#1E3D59"},children:"ç”·ç”Ÿç‰ˆ"}),e.jsx(c,{color:"inherit",startIcon:e.jsx(ie,{}),href:"/message.html",className:"pixel-button-pink",sx:{color:"#1E3D59"},children:"ç•™è¨€æ¿"}),e.jsx(c,{color:"inherit",startIcon:e.jsx(K,{}),onClick:()=>D(!0),className:"pixel-button-pink",sx:{color:"#1E3D59",minWidth:"auto",px:1,maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:A()})]}),e.jsx(re,{color:"inherit",sx:{display:{xs:"block",md:"none"}},onClick:()=>k(!0),className:"pixel-button-pink",children:e.jsx(Fe,{sx:{color:"#1E3D59"}})})]})})}),e.jsx(_e,{anchor:"right",open:he,onClose:()=>k(!1),className:"pixel-theme-pink",children:e.jsx(a,{sx:{width:250,pt:2},children:e.jsxs(Le,{children:[e.jsxs(I,{button:!0,component:"a",href:"/index.html",onClick:()=>k(!1),children:[e.jsx(N,{children:e.jsx(ne,{sx:{color:"#1E3D59"}})}),e.jsx(E,{primary:"é¦–é¡µ",sx:{color:"#1E3D59"}})]}),e.jsxs(I,{button:!0,component:"a",href:"/s.html",onClick:()=>k(!1),children:[e.jsx(N,{children:e.jsx(X,{sx:{color:"#1E3D59"}})}),e.jsx(E,{primary:"Sç‰ˆ",sx:{color:"#1E3D59"}})]}),e.jsxs(I,{button:!0,component:"a",href:"/male.html",onClick:()=>k(!1),children:[e.jsx(N,{children:e.jsx(ce,{sx:{color:"#1E3D59"}})}),e.jsx(E,{primary:"ç”·ç”Ÿç‰ˆ",sx:{color:"#1E3D59"}})]}),e.jsxs(I,{button:!0,component:"a",href:"/message.html",onClick:()=>k(!1),children:[e.jsx(N,{children:e.jsx(ie,{sx:{color:"#1E3D59"}})}),e.jsx(E,{primary:"ç•™è¨€æ¿",sx:{color:"#1E3D59"}})]}),e.jsxs(I,{button:!0,onClick:()=>{D(!0),k(!1)},children:[e.jsx(N,{children:e.jsx(K,{sx:{color:"#1E3D59"}})}),e.jsx(E,{primary:"ç”¨æˆ·è®¾ç½®",sx:{color:"#1E3D59"}})]})]})})}),e.jsxs(se,{maxWidth:"lg",sx:{py:8,minHeight:"100vh",display:"flex",flexDirection:"column",gap:5,animation:"fadeIn 0.6s ease-in-out","@keyframes fadeIn":{from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"}}},className:"pixel-theme-pink",children:[e.jsxs(a,{sx:{textAlign:"center",mb:4},children:[e.jsx(r,{variant:"h3",component:"h1",sx:{fontWeight:"bold",cursor:"pointer",userSelect:"none","&:hover":{opacity:.8}},className:"pixel-title-pink",onDoubleClick:Re,title:"åŒå‡»æ¿€æ´»æ•°æ®åº“è¯Šæ–­åŠŸèƒ½",children:"å¥³Mè‡ªè¯„æŠ¥å‘Š"}),e.jsx(a,{className:"pixel-divider-pink",sx:{mb:4,mt:2}}),e.jsxs(j,{elevation:1,sx:{mt:2,p:2,borderRadius:0,maxWidth:{xs:"100%",md:"80%"},mx:"auto"},className:"pixel-card-pink",children:[e.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,color:"primary.main",textAlign:"center"},children:"è¯„åˆ†ç­‰çº§è¯´æ˜Ž"}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:{xs:1,md:2}},children:[e.jsxs(r,{variant:"body2",sx:{fontSize:"0.9rem"},children:[e.jsx(a,{component:"span",sx:{fontWeight:"bold",color:"#FF1493"},children:"SSS"})," = éžå¸¸å–œæ¬¢"]}),e.jsxs(r,{variant:"body2",sx:{fontSize:"0.9rem"},children:[e.jsx(a,{component:"span",sx:{fontWeight:"bold",color:"#FF69B4"},children:"SS"})," = å–œæ¬¢"]}),e.jsxs(r,{variant:"body2",sx:{fontSize:"0.9rem"},children:[e.jsx(a,{component:"span",sx:{fontWeight:"bold",color:"#87CEEB"},children:"S"})," = æŽ¥å—"]}),e.jsxs(r,{variant:"body2",sx:{fontSize:"0.9rem"},children:[e.jsx(a,{component:"span",sx:{fontWeight:"bold",color:"#FFD700"},children:"Q"})," = ä¸å–œæ¬¢ä½†ä¼šåš"]}),e.jsxs(r,{variant:"body2",sx:{fontSize:"0.9rem"},children:[e.jsx(a,{component:"span",sx:{fontWeight:"bold",color:"#FF4500"},children:"N"})," = æ‹’ç»"]}),e.jsxs(r,{variant:"body2",sx:{fontSize:"0.9rem"},children:[e.jsx(a,{component:"span",sx:{fontWeight:"bold",color:"#808080"},children:"W"})," = æœªçŸ¥"]})]})]}),e.jsxs(a,{sx:{mt:3,textAlign:"center",display:"flex",flexDirection:"column",gap:2,alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center",alignItems:"center"},children:[e.jsx(F,{label:`å·²å®Œæˆ: ${Object.values(f).filter(t=>t!=="").length}/${Object.keys(v).reduce((t,s)=>t+v[s].length,0)}`,color:"primary",variant:"outlined"}),ye&&e.jsx(F,{label:"æœ‰æœªä¿å­˜çš„æ›´æ”¹",color:"warning",variant:"filled",icon:e.jsx(oe,{})}),e.jsx(F,{label:`ç”¨æˆ·: ${Ye()}`,color:"secondary",variant:"outlined",icon:e.jsx(K,{})})]}),e.jsxs(a,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[e.jsx(c,{variant:"contained",size:"large",startIcon:e.jsx(oe,{}),disabled:g||Object.keys(f).length===0,sx:{padding:"12px 32px",fontSize:"1.1rem",fontWeight:"bold"},className:"pixel-button-pink",onClick:we,children:g?"ä¿å­˜ä¸­...":"ä¿å­˜æµ‹è¯•"}),e.jsx(c,{variant:"outlined",size:"large",startIcon:e.jsx(qe,{}),onClick:()=>T(!0),sx:{padding:"12px 32px",fontSize:"1.1rem",fontWeight:"bold"},className:"pixel-button-pink",children:"æŸ¥çœ‹è®°å½•"}),e.jsx(c,{variant:"outlined",size:"large",startIcon:e.jsx(Xe,{}),sx:{padding:"12px 32px",fontSize:"1.1rem",fontWeight:"bold"},className:"pixel-button-pink",onClick:()=>{const t={};Object.entries(v).forEach(([s,n])=>{n.forEach(o=>{const p=Math.floor(Math.random()*L.length);t[`${s}-${o}`]=L[p]})}),S(t),l("å·²å®Œæˆéšæœºé€‰æ‹©ï¼"),i(!0)},children:"éšæœºé€‰æ‹©"}),e.jsx(c,{variant:"outlined",size:"large",startIcon:e.jsx(le,{}),color:"error",sx:{padding:"12px 32px",fontSize:"1.1rem",fontWeight:"bold"},onClick:$e,children:"æ¸…ç©ºæµ‹è¯•"}),ke&&e.jsx(c,{variant:"outlined",size:"large",startIcon:e.jsx(ot,{}),color:"info",sx:{padding:"12px 32px",fontSize:"1.1rem",fontWeight:"bold"},onClick:Z,disabled:g,children:"æ•°æ®åº“è¯Šæ–­"})]})]})]}),Object.entries(v).map(([t,s])=>e.jsxs(j,{elevation:2,sx:{p:{xs:3,md:4},borderRadius:0,backgroundColor:"background.paper",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 24px rgba(0,0,0,0.1)"}},className:"pixel-card-pink",children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(r,{variant:"h5",sx:{mb:0},children:t}),e.jsxs(ae,{size:"small",value:me,onChange:n=>{Ne(t,n.target.value),ue("")},displayEmpty:!0,placeholder:"ä¸€é”®é€‰æ‹©",renderValue:n=>n||"ä¸€é”®é€‰æ‹©",sx:{minWidth:120},children:[e.jsx(_,{value:"",children:e.jsx("em",{children:"ä¸€é”®é€‰æ‹©"})}),L.map(n=>e.jsx(_,{value:n,children:n},n))]})]}),e.jsx(h,{container:!0,spacing:2,sx:{mt:0,width:"100%",margin:0},children:s.map(n=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:{xs:1,md:1.5},borderRadius:2,height:"100%",backgroundColor:x(t,n)?`${b(x(t,n))}20`:"background.paper",boxShadow:x(t,n)?`0 1px 4px ${b(x(t,n))}60`:"0 1px 3px rgba(0,0,0,0.1)",borderLeft:x(t,n)?`3px solid ${b(x(t,n))}`:"none",transition:"all 0.3s ease",gap:1,"&:hover":{backgroundColor:x(t,n)?`${b(x(t,n))}30`:"rgba(98, 0, 234, 0.04)",transform:"translateX(4px)",boxShadow:x(t,n)?`0 2px 8px ${b(x(t,n))}80`:"0 2px 6px rgba(0,0,0,0.15)"}},children:[e.jsx(a,{sx:{display:"flex",alignItems:"center",flexGrow:1,minWidth:0},children:e.jsx(r,{sx:{fontWeight:500,color:x(t,n)?`${b(x(t,n))}`:"text.primary",fontSize:{xs:"0.85rem",md:"1rem"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",transition:"color 0.3s ease"},children:n})}),e.jsxs(ae,{size:"small",value:x(t,n),onChange:o=>De(t,n,o.target.value),sx:{minWidth:{xs:100,md:120},".MuiSelect-select":{py:1.5,px:2}},children:[e.jsx(_,{value:"",children:e.jsx("em",{children:"è¯·é€‰æ‹©"})}),L.map(o=>e.jsx(_,{value:o,children:o},o))]})]})},n))})]},t)),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mt:4,gap:4},children:[e.jsx(c,{variant:"contained",color:"primary",size:"large",onClick:()=>H(!0),sx:{minWidth:200},className:"pixel-button-pink",children:"ç”ŸæˆæŠ¥å‘Š"}),e.jsxs(j,{elevation:2,sx:{p:3,borderRadius:0,textAlign:"center",maxWidth:300,mx:"auto",backgroundColor:"white"},className:"pixel-card-pink",children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:"bold",color:"primary.main",mb:2},children:"æ‰«ç é¢†å–æ‚¨çš„XPæŠ¥å‘Š"}),e.jsx(a,{component:"img",src:"/qrcode.png",alt:"QR Code",sx:{width:"200px",height:"200px",display:"block",margin:"0 auto"}})]})]}),e.jsxs(z,{open:de,onClose:()=>H(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:{xs:"95vh",md:"auto"},maxHeight:{xs:"95vh",md:"90vh"},overflowY:"auto",m:{xs:1,sm:2},width:"100%",maxWidth:{sm:"800px"},mx:"auto",backgroundColor:"#fafafa","@media print":{height:"auto",maxHeight:"none",overflow:"visible"}}},children:[e.jsx(M,{sx:{textAlign:"center",fontWeight:"bold",pt:{xs:4,md:5},mt:{xs:2,md:3},borderBottom:"2px dashed #ff69b4",mb:2},className:"pixel-title-pink",children:"å¥³Mè‡ªè¯„è¯¦ç»†æŠ¥å‘Š"}),e.jsx(B,{ref:C,sx:{px:4,py:3,display:"flex",flexDirection:"column",gap:4,"@media print":{overflow:"visible",height:"auto"}},children:e.jsxs(a,{ref:C,sx:{p:3},children:[e.jsx(r,{variant:"h4",gutterBottom:!0,align:"center",sx:{color:"#ff69b4",mb:4},children:"å¥³Mè‡ªè¯„æŠ¥å‘Š"}),e.jsx(a,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsxs(Ke,{width:600,height:400,data:ee(),children:[e.jsx(Ve,{}),e.jsx(Je,{dataKey:"category"}),e.jsx(Ze,{angle:30,domain:[0,6]}),e.jsx(et,{name:"å¾—åˆ†",dataKey:"value",stroke:"#ff69b4",fill:"#ff69b4",fillOpacity:.6})]})}),Object.entries(te()).map(([t,s])=>s.length===0?null:e.jsxs(a,{sx:{mb:4},children:[e.jsxs(r,{variant:"h5",sx:{color:b(t),borderBottom:`2px solid ${b(t)}`,pb:1,mb:2},children:[t,"çº§ (",s.length,"é¡¹)"]}),e.jsx(h,{container:!0,spacing:2,children:s.map(({category:n,item:o},p)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(j,{elevation:3,sx:{p:2,display:"flex",alignItems:"center",backgroundColor:`${b(t)}22`},children:e.jsxs(r,{children:[e.jsxs("strong",{children:[n,":"]})," ",o]})})},`${n}-${o}-${p}`))})]},t)),e.jsxs(a,{sx:{mt:6,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",p:3,border:"2px solid #ff69b4",borderRadius:2},children:[e.jsx(r,{variant:"h6",sx:{mb:2,color:"#ff69b4"},children:"åŽŸç”Ÿç›¸æœºæ‰«ç é¢†å–æ‚¨çš„XPæŠ¥å‘Š"}),e.jsx(a,{component:"img",src:"/qrcode.png",alt:"QR Code",sx:{width:200,height:200,display:"block"}})]})]})}),e.jsxs(P,{sx:{justifyContent:"center",pb:3,pt:2,gap:2,borderTop:"1px solid rgba(0,0,0,0.1)",backgroundColor:"white"},children:[e.jsx(c,{onClick:We,variant:"contained",color:"primary",className:"pixel-button-pink",children:"ä¿å­˜ä¸ºå›¾ç‰‡"}),e.jsx(c,{onClick:Ie,variant:"contained",color:"secondary",className:"pixel-button-pink",children:"ä¿å­˜ä¸ºPDF"})]}),e.jsx(re,{onClick:()=>H(!1),sx:{position:"absolute",right:8,top:8,color:"#ff69b4"},className:"pixel-button-pink",children:e.jsx(le,{})})]}),e.jsxs(z,{open:fe,onClose:()=>T(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:{xs:"80vh",md:"60vh"},maxHeight:{xs:"90vh",md:"80vh"}}},children:[e.jsx(M,{sx:{textAlign:"center",fontWeight:"bold",borderBottom:"2px dashed #ff69b4",mb:2},className:"pixel-title-pink",children:"æµ‹è¯•åŽ†å²è®°å½•"}),e.jsx(B,{sx:{px:3,py:2},children:g?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(r,{children:"åŠ è½½ä¸­..."})}):$.length===0?e.jsxs(a,{sx:{textAlign:"center",py:4},children:[e.jsx(r,{variant:"h6",color:"text.secondary",children:"æš‚æ— æµ‹è¯•è®°å½•"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"å®Œæˆæµ‹è¯•å¹¶ä¿å­˜åŽï¼Œè®°å½•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ"})]}):e.jsx(h,{container:!0,spacing:2,children:$.map((t,s)=>{var n,o;return e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(j,{elevation:2,sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(r,{variant:"h6",sx:{mb:1,color:"#ff69b4"},children:["æµ‹è¯• #",$.length-s]}),e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["æ—¶é—´: ",new Date(t.created_at).toLocaleString("zh-CN")]}),e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["å®Œæˆåº¦: ",((n=t.report_data)==null?void 0:n.completedItems)||0,"/",((o=t.report_data)==null?void 0:o.totalItems)||0]}),e.jsxs(a,{sx:{mt:"auto",display:"flex",gap:1},children:[e.jsx(c,{size:"small",variant:"contained",onClick:()=>Ee(t.id),disabled:g,sx:{flex:1},children:"åŠ è½½"}),e.jsx(c,{size:"small",variant:"outlined",color:"error",onClick:()=>Oe(t.id),disabled:g,children:"åˆ é™¤"})]})]})},t.id)})})}),e.jsx(P,{sx:{justifyContent:"center",pb:2},children:e.jsx(c,{onClick:()=>T(!1),className:"pixel-button-pink",children:"å…³é—­"})})]}),e.jsxs(z,{open:ge,onClose:()=>D(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(M,{sx:{textAlign:"center",fontWeight:"bold",borderBottom:"2px dashed #ff69b4",mb:2},className:"pixel-title-pink",children:"ç”¨æˆ·è®¾ç½®"}),e.jsx(B,{sx:{px:3,py:2},children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(He,{label:"ç”¨æˆ·æ˜µç§°",value:V,onChange:t=>be(t.target.value),fullWidth:!0,helperText:"è®¾ç½®ä¸€ä¸ªå¥½è®°çš„æ˜µç§°ï¼Œæ–¹ä¾¿è¯†åˆ«æ‚¨çš„æµ‹è¯•è®°å½•",variant:"outlined"}),e.jsxs(a,{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(r,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:"ç”¨æˆ·ä¿¡æ¯"}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["ç”¨æˆ·ID: ",O()]}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["å½“å‰æ˜µç§°: ",A()]}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["æµ‹è¯•è®°å½•æ•°: ",$.length]})]})]})}),e.jsxs(P,{sx:{justifyContent:"center",pb:2,gap:2},children:[e.jsx(c,{onClick:Te,variant:"contained",className:"pixel-button-pink",children:"ä¿å­˜æ˜µç§°"}),e.jsx(c,{onClick:()=>D(!1),className:"pixel-button-pink",children:"å–æ¶ˆ"})]})]}),e.jsxs(z,{open:ve,onClose:()=>G(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(M,{sx:{textAlign:"center",fontWeight:"bold",borderBottom:"2px dashed #ff69b4",mb:2},className:"pixel-title-pink",children:"æ•°æ®åº“è¯Šæ–­æŠ¥å‘Š"}),e.jsx(B,{sx:{px:3,py:2},children:g?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(r,{children:"æ­£åœ¨è¯Šæ–­æ•°æ®åº“..."})}):m?e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(j,{elevation:1,sx:{p:2,bgcolor:"grey.50"},children:[e.jsx(r,{variant:"h6",sx:{mb:2,color:"#ff69b4"},children:"è¯Šæ–­æ‘˜è¦"}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsxs(h,{item:!0,xs:6,sm:3,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"æ•°æ®åº“è¿žæŽ¥"}),e.jsx(r,{variant:"body1",children:m.summary.connection})]}),e.jsxs(h,{item:!0,xs:6,sm:3,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"æ•°æ®è¡¨"}),e.jsxs(r,{variant:"body1",children:[m.summary.tablesCount,"/",m.summary.totalTables]})]}),e.jsxs(h,{item:!0,xs:6,sm:3,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"é”™è¯¯æ•°é‡"}),e.jsx(r,{variant:"body1",color:m.summary.errorsCount>0?"error":"success.main",children:m.summary.errorsCount})]})]})]}),m.details.errors.length>0&&e.jsxs(j,{elevation:1,sx:{p:2,bgcolor:"#ffebee"},children:[e.jsx(r,{variant:"h6",sx:{mb:2,color:"error.main"},children:"å‘çŽ°çš„é—®é¢˜"}),m.details.errors.map((t,s)=>e.jsxs(r,{variant:"body2",sx:{mb:1,color:"error.dark"},children:["â€¢ ",t]},s))]}),e.jsxs(j,{elevation:1,sx:{p:2,bgcolor:"#e8f5e8"},children:[e.jsx(r,{variant:"h6",sx:{mb:2,color:"success.main"},children:"ä¿®å¤å»ºè®®"}),m.recommendations.map((t,s)=>e.jsxs(r,{variant:"body2",sx:{mb:1},children:[s+1,". ",t]},s))]}),e.jsxs(j,{elevation:1,sx:{p:2},children:[e.jsx(r,{variant:"h6",sx:{mb:2,color:"#ff69b4"},children:"æ•°æ®è¡¨çŠ¶æ€"}),e.jsx(h,{container:!0,spacing:2,children:Object.entries(m.details.tables).map(([t,s])=>e.jsx(h,{item:!0,xs:12,sm:4,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(r,{variant:"body2",sx:{fontWeight:"bold"},children:[t,":"]}),e.jsx(F,{label:s?"å­˜åœ¨":"ç¼ºå¤±",color:s?"success":"error",size:"small"})]})},t))})]})]}):e.jsx(a,{sx:{textAlign:"center",py:4},children:e.jsx(r,{variant:"h6",color:"text.secondary",children:'ç‚¹å‡»"å¼€å§‹è¯Šæ–­"æ£€æŸ¥æ•°æ®åº“çŠ¶æ€'})})}),e.jsxs(P,{sx:{justifyContent:"center",pb:2,gap:2},children:[!m&&e.jsx(c,{onClick:Z,variant:"contained",disabled:g,className:"pixel-button-pink",children:g?"è¯Šæ–­ä¸­...":"å¼€å§‹è¯Šæ–­"}),e.jsx(c,{onClick:()=>{G(!1),J(null)},className:"pixel-button-pink",children:"å…³é—­"})]})]}),e.jsx(Ue,{open:xe,autoHideDuration:3e3,onClose:()=>i(!1),message:pe,anchorOrigin:{vertical:"bottom",horizontal:"center"}})]}),e.jsx(tt,{pixelStyle:!0,pinkStyle:!0})]})})}Ge.createRoot(document.getElementById("root")).render(e.jsx(Qe.StrictMode,{children:e.jsx(lt,{})}));
